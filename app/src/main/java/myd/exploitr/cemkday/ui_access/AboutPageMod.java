package myd.exploitr.cemkday.ui_access;

import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageView;

import com.bumptech.glide.Glide;

import mehdi.sakout.aboutpage.AboutPage;
import mehdi.sakout.aboutpage.Element;
import myd.exploitr.cemkday.R;

public class AboutPageMod extends AboutPage {

    private final Context mContext;
    private final View mView;

    /**
     * The AboutPage requires a context to perform it's functions. Give it a context associated to an
     * Activity or a Fragment. To avoid memory leaks, don't pass a
     * {@link Context#getApplicationContext() Context.getApplicationContext()} here.
     *
     * @param context f
     */
    AboutPageMod(Context context) {
        super(context);
        mContext = context;
        mView = LayoutInflater.from(mContext).inflate(R.layout.about_page, null);
    }

    @Override
    public AboutPage setImage(int resource) {
        ImageView image = mView.findViewById(R.id.image);
        Glide.with(mContext)
                .load(resource)
                .fitCenter()
                .into(image);
        return super.setImage(resource);
    }

    @Override
    public AboutPage addPlayStore(String id, String title) {
        addItem(new Element()
                .setTitle(title)
                .setIconDrawable(R.drawable.about_icon_google_play)
                .setIconTint(R.color.about_play_store_color)
                .setValue(id)
                .setIntent(new Intent(Intent.ACTION_VIEW, Uri.parse("https://play.google.com/store/apps/dev?id=" + id))));
        return this;
    }

    public AboutPageMod addPrivacyPolicy(String url) {
        addItem(new Element()
                .setIntent(new Intent(Intent.ACTION_VIEW).setData(Uri.parse(url)))
                .setTitle("View Privacy Policy")
                .setIconDrawable(R.drawable.ic_pvp)
                .setIconTint(android.R.color.holo_red_light));
        return this;
    }

    public void addTos(String tosUrl) {
        addItem(new Element().setIntent(new Intent(Intent.ACTION_VIEW).setData(Uri.parse(tosUrl)))
                .setTitle("View Terms & Conditions")
                .setIconDrawable(R.drawable.ic_terms)
                .setIconTint(android.R.color.holo_blue_bright));
    }

    public AboutPageMod addLibs(View.OnClickListener listener) {
        addItem(new Element()
                .setTitle("3rd Party Libraries Used")
                .setOnClickListener(listener)
                .setIconDrawable(R.drawable.ic_libraries)
                .setIconTint(android.R.color.holo_green_light));
        return this;
    }

    public AboutPageMod addGroup(String name) {
        return (AboutPageMod) super.addGroup(name);
    }
}
